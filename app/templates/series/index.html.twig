{% extends 'base.html.twig' %}

{% block title %}Series index
{% endblock %}

{% block body %}
	{% if series|length > 0 %}
		{% include('./header.html.twig') with {'poster_picture_id': (series|first).id} %}
	{% else %}
		{% include('./header.html.twig') %}
	{% endif %}
	<div class="flex ">
		<div class="bg-[--dark-blue] py-20">
			<form action="" method="get">
				<div class="rounded-full bg-[--grey] m-2 flex px-2  py-1 items-center">
					<input type="text" class="bg-transparent" name="init"/>
					<input type="submit" value="">
						<i class="nf nf-fa-search text-white"></i>
					</input>
				</div>
			</form>
		</div>
		<div class="px-10 w-full">
			<div class="flex gap-2 justify-center p-5">
				{% if page > 0 %}
					<a href="{{ path('app_series_index', {'page': page - 1}) }}">
						<span>&#60;</span>-</a>
				{% endif %}
				{% for i in 0..pagesNb %}

					<a href="{{ path('app_series_index', {'page': i}) }}" class="px-1 w-6 flex justify-center items-center {% if i == page %} rounded bg-cyan-600 text-white {% endif %}">{{ i + 1}}</a>
				{% endfor %}
				{% if page < pagesNb %}
					<a href="{{ path('app_series_index', {'page': page + 1}) }}">-></a>
				{% endif %}
			</div>
			<div class="grid grid-cols-5 grid-rows-2">
				{% for series in series %}
					<div class="flex flex-col py-5">
						<div class="relative w-fit h-64 group overflow-hidden rounded">
							<a href="{{ path('app_series_show', {'id': series.id}) }}">
								<img src="{{ path('app_series_poster', {'id': series.id}) }}" alt="Series poster" class="shadow-sm w-full h-full object-cover max-w-48 ">
							</a>
							{% include('./follow.html.twig') with {'serie': series} %}
						</div>
						<div class="p-2 ">
							<h1 class="text-white font-bold ">{{ series.title }}</h1>
							{# <p>{{ series.plot }}</p>  #}
							<p>{{ series.yearStart }}</p>
						</div>
					</div>
				{% else %}
					<div>
						<p>no records found</p>
					</div>
				{% endfor %}
			</div>
		</div>
	</div>
{% endblock %}
